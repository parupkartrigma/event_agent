<div ng-controller="users_managementCtrl">
    <div class="clearfix"></div>
    <div class="alert {{dump.type}}" ng-show="dump.message">{{dump.message}}</div>
    <div class="grid">
        <div class="grid-title">
            <div class="pull-left">
                <span>Users Management</span>
                <div class="clearfix"></div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="grid-content overflow">
            <div class="clear">
                <!---->
            </div>
            <br/>
            <div class="alert" ng-show="pending_users.length==0">
                No items matching selected criteria.
            </div>
            <table class="table table-bordered table-mod-2">
                <thead>
                    <tr>
                        <th>Email</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th width="50">Group</th>
                        <th width="50">Action</th>
                        <th width="50">Delete</th>
                    </tr>
                </thead>
                <tbody ng-repeat="user in approved_users">
                    <tr>
                        <td>
                            {{user.email}}
                        </td>
                        <td>{{user.first_name}}</td>
                        <td>{{user.last_name}}</td>
                        <td>
                            <select class="span2" ng-change="change_group(user,group_id)" ng-model="group_id">
                                <option ng-selected="user.group_id==group.name" ng-repeat="group in groups" value="{{group.name}}">{{group.name}}</option>
                            </select>
                        </td>
                        <td>
                        	 <select class="span2" ng-change="change_status(user,status,$index)" ng-model="status">
                                <option ng-selected="user.status=='pending'" value="pending">Pending</option>
                                <option ng-selected="user.status=='approved'" value="approved">Approved</option>
                                <option ng-selected="user.status=='deny'" value="deny">Deny</option>
                            </select>
                        </td>
						<td>
							<span ng-click="delete_confirm=true" class="btn btn-danger">
                                Delete
                            </span>
						</td>
                    </tr>
                    <tr ng-show="delete_confirm">
                        <td colspan="6">
                            <div class="alert">
                                Are you sure you want to delete this item?
                                <span class="btn-group">
                                    <span ng-click="delete($index)" class="btn btn-danger">Yes, sure</span>
                                    <span ng-click="delete_confirm=false;" class="btn btn-default">Cancel</span>
                                </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="clearfix"></div>
        </div>
    </div>
</div>